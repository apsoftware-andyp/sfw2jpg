/**
 * Copyright (c) 2021 apsoftware
 * All rights reserved
 */

import org.junit.Assert
import org.junit.Test
import java.io.BufferedInputStream
import java.io.FileOutputStream
import java.io.InputStream

class FileOpenTest {
    companion object {
        val SFW_ASSET = "29196_17.sfw"
    }

    internal fun getAssetInputStream(asset : String): InputStream? {
        return {}.javaClass.getResourceAsStream("assets/" + asset)
    }

    @Test
    internal fun testAssetExists() {
        Assert.assertNotNull(getAssetInputStream(SFW_ASSET))
    }

    @Test
    internal fun testAssetValid() {
        val inputStream = BufferedInputStream(getAssetInputStream(SFW_ASSET))
        Assert.assertTrue(FilmWorksToJpeg.isSFW(inputStream))
    }

    @Test
    internal fun testConvertAsset() {
        val inputStream = BufferedInputStream(getAssetInputStream(SFW_ASSET))
        val outputStream = FileOutputStream("test.jpg")

        FilmWorksToJpeg.convert(inputStream, outputStream)

        inputStream.close()
        outputStream.close()
    }

}